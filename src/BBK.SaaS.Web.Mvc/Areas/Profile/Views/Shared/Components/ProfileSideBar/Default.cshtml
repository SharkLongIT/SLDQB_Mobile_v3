@using System.IO
@using BBK.SaaS.Web.Areas.Profile.Views.Shared.Components.ProfileSideBar
@using BBK.SaaS.Web.Navigation;

@model UserTypeNavigationViewModel

<div id="sidebar-menu">
	<ul class="sidebar-links" id="simple-bar">
		<li class="back-btn">
			<a href="/"><img class="img-fluid" src="/themes/mofi/assets/images/logo/logo-icon.png" alt=""></a>
			<div class="mobile-back text-end"><span>Back</span><i class="fa fa-angle-right ps-2" aria-hidden="true"></i></div>
		</li>
		<li class="pin-title sidebar-main-title">
			<div>
				<h6>Pinned</h6>
			</div>
		</li>

		<li class="sidebar-main-title">
			<div>
				<h6 class="">@Model.TopMenu.DisplayName</h6>
			</div>
		</li>

		@foreach (var group in Model.TopMenu.Items.Where(x => x.IsVisible))
		{
			@if (group.Items.Any())
			{
				<li class="sidebar-list">
					<i class="fa fa-thumb-tack"></i>
					<a class="sidebar-link sidebar-title" href="javascript:void(0)">
						<svg class="stroke-icon">
							<use href="@group.Icon"></use>
						</svg>
						@*<i class="@group.Icon stroke-icon"></i>*@
						@*<svg class="fill-icon">
				<use href="/themes/mofi/assets/svg/icon-sprite.svg#fill-project"></use>
				</svg>*@
						<span>@(Html.Raw($"{group.DisplayName}"))</span>
					</a>
					<ul class="sidebar-submenu">

						@foreach (var item in group.Items)
						{
							var items = item.Items?.Select(x => System.IO.Path.GetFileNameWithoutExtension(x.Url)).Where(x => x != "javascript:void(0);").ToList();

							if (items?.Any() != true)
							{
								<text>
								<li><a href="@item.Url" class="@((ViewBag.CurrentPageName != null && ViewBag.CurrentPageName.Contains(item.Name)) ? " active" : "" )">@item.DisplayName</a></li>
								</text>
							}
						}

					</ul>
				</li>
			}
			else
			{
				<li class="sidebar-list">
					<i class="fa fa-thumb-tack"></i>
					<a class="sidebar-link sidebar-title" href="@group.Url">
						@* <svg class="stroke-icon">
				<use href="@group.Icon"></use>
				</svg> *@
						<span>@(Html.Raw($"{group.DisplayName}"))</span>
					</a>
				</li>
			}
		}

		@if (Model.Menus != null && Model.Menus.Count > 0)
		{
			foreach (var menu in Model.Menus)
			{
				<li class="sidebar-main-title">
					<div>
						<h6 class="">@menu.DisplayName</h6>
					</div>
				</li>

				@foreach (var group in menu.Items.Where(x => x.IsVisible))
				{
					@if (group.Items.Any())
					{
						<li class="sidebar-list">
							<i class="fa fa-thumb-tack"></i>
							<a class="sidebar-link sidebar-title" href="javascript:void(0)">
								<svg class="stroke-icon">
									<use href="@group.Icon"></use>
								</svg>
								<span>@(Html.Raw($"{group.DisplayName}"))</span>
							</a>
							<ul class="sidebar-submenu">

								@foreach (var item in group.Items)
								{
									var items = item.Items?.Select(x => System.IO.Path.GetFileNameWithoutExtension(x.Url)).Where(x => x != "javascript:void(0);").ToList();

									if (items?.Any() != true)
									{
										<text>
										<li><a href="@item.Url" class="@((ViewBag.CurrentPageName != null && ViewBag.CurrentPageName.Contains(item.Name)) ? " active" : "" )">@item.DisplayName</a></li>
										</text>
									}
								}

							</ul>
						</li>
					}
				}

				@*<li class="mega-menu sidebar-list">
		<i class="fa fa-thumb-tack"></i><a class="sidebar-link sidebar-title" href="javascript:void(0)">
		<svg class="stroke-icon">
		<use href="../assets/svg/icon-sprite.svg#stroke-others"></use>
		</svg>
		<svg class="fill-icon">
		<use href="../assets/svg/icon-sprite.svg#fill-others"></use>
		</svg><span>Others</span>
		</a>
		<div class="mega-menu-container menu-content">
		<div class="container-fluid">
		<div class="row">
		<div class="col mega-box">
		<div class="link-section">
		<div class="submenu-title">
		<h5>Email templates</h5>
		</div>
		<ul class="submenu-content opensubmegamenu">
		<li><a href="basic-template.html">Basic Email</a></li>
		<li><a href="email-header.html">Basic With Header</a></li>
		<li><a href="template-email.html">Ecomerce Template</a></li>
		<li><a href="template-email-2.html">Email Template 2</a></li>
		<li><a href="ecommerce-templates.html">Ecommerce Email</a></li>
		<li><a href="email-order-success.html">Order Success</a></li>
		</ul>
		</div>
		</div>
		</div>
		</div>
		</div>
		</li>*@
			}
		}

	</ul>
</div>