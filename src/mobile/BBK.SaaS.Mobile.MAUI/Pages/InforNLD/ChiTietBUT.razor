@using Abp.UI;
@using BBK.SaaS.Services.Navigation
@inherits SaaSMainLayoutPageComponentBase
@attribute [Route("/ChiTietBUT")]

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


@if (Model != null && Model.JobApplication != null)
{

    <div class="card">
        <div class="container">
            <div class="card-body">
                <div class="form-user mt-3">
                    <div class="row">
                        <div class="col-4">
                            <img width="100%" height="100px" src="@_userImage" />
                        </div>
                        <div class="col-8">
                            <h1>@Model.User.Name</h1>
                            <h5>@Model.Positions</h5>
                            @if (@Model.JobApplication.LastModificationTime == null)
                            {
                                <div>Thời gian cập nhật: @Model.JobApplication.CreationTime.ToString("dd/MM/yyyy")</div>
                            }
                            else
                            {
                                <div>Thời gian cập nhật: @Model.JobApplication.LastModificationTime.Value.ToString("dd/MM/yyyy")</div>
                            }
                        </div>
                    </div>
                </div>
                <hr>
                <div class="d-flex">
                    <span class="bg-information"><i class='fas fa-user-tie icon'></i></span>
                    <h1>Thông tin cá nhân</h1>
                </div>
                <div class="row information-user">
                    <div class="infor">
                        <span>Email:</span>
                        <div>@Model.User.EmailAddress</div>
                    </div>
                    <div class="infor">
                        <span>Số điện thoại:</span>
                        <div>@Model.User.PhoneNumber</div>
                    </div>
                    <div class="infor">
                        <span>Ngày sinh: </span>
                        <div>@Model.Candidate.DateOfBirth?.ToString("dd/MM/yyyy")  </div>
                    </div>
                    <div class="infor">
                        <span>Giới tính:</span>
                        @if (Model.Candidate.Gender == BBK.SaaS.Mdls.Profile.Candidates.Dto.GenderEnum.Male)
                        {
                            <div>Nam</div>
                        }
                        else if (Model.Candidate.Gender == BBK.SaaS.Mdls.Profile.Candidates.Dto.GenderEnum.Female)
                        {
                            <div>Nữ</div>
                        }
                        else
                        {
                            <div>Không xác định</div>
                        }
                    </div>
                    <div class="infor">
                        @if (Model.Candidate.Marital == true)
                        {
                            <span>Tình trạng hôn nhân:</span>
                            <div>Đã kết hôn</div>

                        }
                        else
                        {
                            <span>Tình trạng hôn nhân:</span>
                            <div>Độc thân </div>
                        }
                    </div>
                    <div class="infor">
                        <span>Địa chỉ: </span>
                        <div> @Model.Candidate.Address</div>
                    </div>
                </div>
                <hr>
                <div class="d-flex mt-3">
                    <span class="bg-information"> <i class='fas fa-briefcase icon'></i></span>

                    <h1>Mục tiêu nghề nghiệp</h1>
                </div>
                <div class="row information-user">
                    <div class="infor">
                        <span> Vị trí ứng tuyển: </span>
                        <div>@Model.Positions</div>
                    </div>
                    <div class="infor">
                        <span> Mục tiêu tương lai: </span>
                        <div>@Model.JobApplication.Career</div>
                    </div>
                    <div class="infor">
                        <span>Mức lương mong muốn: </span>
                        @if (@Model.JobApplication.DesiredSalary == null || @Model.JobApplication.DesiredSalary == 0)
                        {
                            <div>Lương thoả thuận</div>
                        }
                        else
                        {
                            <div>@Model.JobApplication.DesiredSalary VNĐ</div>
                        }
                    </div>
                    <div class="infor">
                        <span>Hình thức làm việc: </span>
                        <div>@Model.FormOfWork</div>
                    </div>
                    <div class="infor">
                        <span>Trình độ học vấn: </span>
                        <div>@Model.Literacy</div>
                    </div>
                </div>
                <hr />

                <div class="row">
                    <div class="d-flex mt-3">
                        <span class="bg-information"> <i class='fas fa-briefcase icon'></i></span>
                        <h1>Kinh nghiệm làm việc</h1>
                        <a class="add-exp btn" href="javascript:;" @onclick="OpenCreateModal">
                            <i class='fas fa-plus-circle'></i>
                        </a>
                    </div>
                    @if (Model.JobApplication.WorkExperiences != null && Model.JobApplication.WorkExperiences.Count > 0)
                    {

                        @foreach (var workExperience in Model.JobApplication.WorkExperiences)
                        {
                            <div class="infor">
                                <div class="row d-flex">
                                    <div class="col-2">
                                        <span>
                                            <i class="material-icons" @onclick="(()=>DisPlayAction(workExperience))">more_vert</i>
                                        </span>
                                    </div>
                                </div>
                                <div> @workExperience.Positions </div>
                                <div> @workExperience.CompanyName </div>
                                <div> @workExperience.StartTime.ToString("dd/MM/yyy") - @workExperience.EndTime.ToString("dd/MM/yyy") </div>

                            </div>
                         @*    <div class="infor">
                                <span>Thời gian bắt đầu:</span>
                               
                            </div>
                            <div class="infor">
                                <span>Thời gian kết thúc:</span>
                               
                            </div>
                            <div class="infor">
                                <span>Tên công ty:</span>
                              
                            </div> *@
                            <div class="description ms-4">
                                <div> @workExperience.Description </div>
                            </div>
                            <hr style="color: black" />
                        }

                    }
                    else
                    {
                        <p></p>
                    }
                </div>
                <div class="row">
                    <div class="d-flex mt-3">
                        <span class="bg-information"> <i class='fas fa-briefcase icon'></i></span>
                        <h1>Trình độ học vấn</h1>
                        <a href="javascript:;" class="add-process btn" @onclick="OpenCreateLearningProcessModal">
                            <i class='fas fa-plus-circle'></i>
                        </a>
                    </div>
                    @if (Model.JobApplication.LearningProcess != null && Model.JobApplication.LearningProcess.Count > 0)
                    {


                        @foreach (var learningProcess in Model.JobApplication.LearningProcess)
                        {
                            <div class="infor">
                                <div class="row d-flex">
                                    <div class="col-10">

                                        <span class="">Ngành học/Môn học:</span>
                                    </div>
                                    <div class="col-2">
                                        <span>
                                            <i class="material-icons" @onclick="(()=>DisPlayActionLearn(learningProcess))">more_vert</i>
                                        </span>
                                    </div>
                                </div>
                                <div> @learningProcess.AcademicDiscipline </div>


                            </div>
                            <div class="infor">
                                <span>Thời gian bắt đầu:</span>
                                <div> @learningProcess.StartTime.ToString("dd/MM/yyy") </div>
                            </div>
                            <div class="infor">
                                <span>Thời gian kết thúc:</span>
                                <div> @learningProcess.EndTime.ToString("dd/MM/yyy") </div>
                            </div>
                            <div class="infor">
                                <span>Tên trường học:</span>
                                <div> @learningProcess.SchoolName </div>
                            </div>
                            <div class="infor">
                                <span>Mô tả:</span>
                                <div> @learningProcess.Description </div>
                            </div>
                            <hr style="color: black" />
                        }
                    }
                    else
                    {
                        <p></p>
                    }
                </div>

            </div>
        </div>
    </div>
}
else
{
    <p>Đang tải...</p>
}

@* <div class="p-2 ml-auto">
    <div class="d-flex justify-content-center">
        <a class="view-detail btn btn-primary" href="javascript:;" @onclick="OpenCreateModal">
            Thêm kinh nghiệm làm việc
        </a>
    </div>
    <div class="d-flex justify-content-center">
        <a href="javascript:;" class="view-detail btn btn-primary" @onclick="OpenCreateLearningProcessModal">
            Thêm trình độ học vấn
        </a>
    </div>

</div>
 *@
<CreateExpWorkModal OnSave="RefreshList" @ref="createExpWorkModal"></CreateExpWorkModal>
<CreateLearningProcessModal OnSave="RefreshList" @ref="createLearningProcessModal"></CreateLearningProcessModal>




